<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>编辑任务 - 小久的任务卡片</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/edit.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="page-title">
                <button class="back-btn" onclick="goBack()">
                    <span class="icon">←</span>
                    <span>返回</span>
                </button>
                <h1>编辑任务列表</h1>
            </div>
            <div class="user-info">
                <label for="username-input">用户名：</label>
                <input type="text" id="username-input" placeholder="请输入用户名" maxlength="10">
                <button class="save-username-btn" onclick="saveUsername()">保存</button>
            </div>
        </header>

        <main class="edit-container">
            <div class="tasks-section">
                <div class="section-header">
                    <h2>任务列表</h2>
                    <button class="add-task-btn" onclick="addNewTask()">
                        <span class="icon">+</span>
                        <span>添加任务</span>
                    </button>
                </div>
                
                <div class="tasks-list" id="tasks-list">
                    <!-- 任务列表将通过JavaScript动态生成 -->
                </div>
                
                <div class="add-task-form" id="add-task-form" style="display: none;">
                    <textarea id="new-task-input" placeholder="请输入新任务名称&#10;支持多行输入，按Shift+Enter换行&#10;按Enter确认添加" maxlength="50" rows="3"></textarea>
                    <div class="form-buttons">
                        <button class="confirm-btn" onclick="confirmAddTask()">确认</button>
                        <button class="cancel-btn" onclick="cancelAddTask()">取消</button>
                    </div>
                </div>
            </div>

            <div class="actions-section">
                <h2>操作</h2>
                <div class="action-buttons">
                    <button class="action-btn reset-btn" onclick="resetAllTasks()">
                        <span class="icon">🔄</span>
                        <span>重置所有任务</span>
                    </button>
                    <button class="action-btn restore-btn" onclick="restoreDefaultTasks()">
                        <span class="icon">📋</span>
                        <span>恢复默认任务</span>
                    </button>
                    <button class="action-btn export-btn" onclick="exportData()">
                        <span class="icon">📤</span>
                        <span>导出数据</span>
                    </button>
                    <button class="action-btn import-btn" onclick="importData()">
                        <span class="icon">📥</span>
                        <span>导入数据</span>
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- 导入数据模态框 -->
    <div class="modal" id="import-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>导入数据</h3>
                <button class="close-btn" onclick="closeImportModal()">&times;</button>
            </div>
            <div class="modal-body">
                <textarea id="import-textarea" placeholder="请粘贴导出的JSON数据..."></textarea>
            </div>
            <div class="modal-footer">
                <button class="confirm-btn" onclick="confirmImport()">导入</button>
                <button class="cancel-btn" onclick="closeImportModal()">取消</button>
            </div>
        </div>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/edit.js"></script>
</body>
</html>