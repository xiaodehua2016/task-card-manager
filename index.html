<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="å„¿ç«¥å‹å¥½çš„æ¯æ—¥ä»»åŠ¡ç®¡ç†å·¥å…·ï¼Œå¸®åŠ©åŸ¹å…»è‰¯å¥½ä¹ æƒ¯å’Œä¸“æ³¨åŠ›">
    <meta name="keywords" content="ä»»åŠ¡ç®¡ç†,å„¿ç«¥æ•™è‚²,ä¹ æƒ¯å…»æˆ,ä¸“æ³¨åŠ›è®­ç»ƒ">
    <meta name="author" content="CodeBuddy">
    <title>å°ä¹…çš„ä»»åŠ¡å¡ç‰‡ - å„¿ç«¥ä»»åŠ¡ç®¡ç†å·¥å…·</title>
    
    <!-- PWAæ”¯æŒ -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ä»»åŠ¡å¡ç‰‡">
    
    <!-- å›¾æ ‡ -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="icon-192.svg">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/cards.css">
    <link rel="stylesheet" href="css/animations.css">
</head>
<body>
    <div class="container">
        <!-- é¡¶éƒ¨ä¿¡æ¯åŒºåŸŸ -->
        <header class="header">
            <div class="date-info">
                <h1 id="current-date"></h1>
                <div class="weather-icon">â˜€ï¸</div>
            </div>
            <div class="user-greeting">
                <h2>ä½ å¥½ï¼Œ<span id="username">å°ä¹…</span>ï¼</h2>
                <p id="progress-message" class="progress-message">ä»Šå¤©ä½ è¿˜æ²¡å¼€å§‹ä»»åŠ¡ï¼Œè¯¥åŠ æ²¹å–½ï¼</p>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
                <span class="progress-text" id="progress-text">0/8</span>
            </div>
            
            <!-- å¾½ç« æ˜¾ç¤ºåŒºåŸŸ -->
            <div class="badges-section" id="badges-section" style="display: none;">
                <div class="badges-title">ğŸ‰ è·å¾—å¾½ç« </div>
                <div class="badges-container" id="badges-container">
                    <!-- å¾½ç« å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </header>

        <!-- ä»»åŠ¡å¡ç‰‡åŒºåŸŸ -->
        <main class="tasks-container">
            <div class="tasks-grid" id="tasks-grid">
                <!-- ä»»åŠ¡å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </main>

        <!-- åº•éƒ¨å¯¼èˆª -->
        <footer class="footer">
            <button class="nav-btn" onclick="openFocusChallenge()">
                <span class="icon">â°</span>
                <span class="text">ä¸“æ³¨åŠ›å¤§æŒ‘æˆ˜</span>
            </button>
            <button class="nav-btn" onclick="openEditTasks()">
                <span class="icon">âœï¸</span>
                <span class="text">ä»»åŠ¡ç¼–è¾‘</span>
            </button>
            <button class="nav-btn" onclick="openTodayTasksManager()">
                <span class="icon">ğŸ“‹</span>
                <span class="text">ä»Šæ—¥ä»»åŠ¡ç®¡ç†</span>
            </button>
            <button class="nav-btn" onclick="openStatistics()">
                <span class="icon">ğŸ“Š</span>
                <span class="text">æŸ¥çœ‹ç»Ÿè®¡</span>
            </button>
            <button class="nav-btn" onclick="resetTasks()">
                <span class="icon">ğŸ”„</span>
                <span class="text">é‡ç½®ä»Šæ—¥</span>
            </button>
        </footer>
        
        <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
        <div class="version-info">
            <span>v4.4.2 - æœåŠ¡å™¨ä¸²è¡Œæ›´æ–°æœºåˆ¶</span>
        </div>
    </div>

    <!-- åº†ç¥åŠ¨ç”» -->
    <div class="celebration" id="celebration">
        <div class="celebration-text">å¤ªæ£’äº†ï¼ğŸ‰</div>
        <div class="confetti"></div>
    </div>

    <!-- ç¯å¢ƒæ£€æµ‹å’Œè‡ªåŠ¨é€‰æ‹©è„šæœ¬ -->
    <script>
        // æ£€æµ‹å½“å‰ç¯å¢ƒå¹¶é€‰æ‹©åˆé€‚çš„JavaScriptç‰ˆæœ¬
        function detectEnvironment() {
            const hostname = window.location.hostname;
            const protocol = window.location.protocol;
            
            console.log('[ç¯å¢ƒæ£€æµ‹] å½“å‰åŸŸå:', hostname);
            console.log('[ç¯å¢ƒæ£€æµ‹] å½“å‰åè®®:', protocol);
            
            // GitHub Pagesæ£€æµ‹
            if (hostname.includes('github.io') || hostname.includes('github.com')) {
                console.log('[ç¯å¢ƒæ£€æµ‹] æ£€æµ‹åˆ°GitHub Pagesç¯å¢ƒï¼Œä½¿ç”¨é™æ€ç‰ˆæœ¬');
                return 'static';
            }
            
            // æœ¬åœ°å¼€å‘ç¯å¢ƒæ£€æµ‹
            if (hostname === 'localhost' || hostname === '127.0.0.1' || protocol === 'file:') {
                console.log('[ç¯å¢ƒæ£€æµ‹] æ£€æµ‹åˆ°æœ¬åœ°ç¯å¢ƒï¼Œå°è¯•æœåŠ¡å™¨ç‰ˆæœ¬');
                return 'local';
            }
            
            // å…¶ä»–æœåŠ¡å™¨ç¯å¢ƒ
            console.log('[ç¯å¢ƒæ£€æµ‹] æ£€æµ‹åˆ°æœåŠ¡å™¨ç¯å¢ƒï¼Œä½¿ç”¨æœåŠ¡å™¨ç‰ˆæœ¬');
            return 'server';
        }
        
        // åŠ¨æ€åŠ è½½å¯¹åº”çš„JavaScriptæ–‡ä»¶
        function loadAppropriateScript() {
            const environment = detectEnvironment();
            let scriptSrc;
            
            if (environment === 'static') {
                scriptSrc = 'js/main-static.js';
                // æ›´æ–°é¡µé¢æç¤ºä¿¡æ¯
                updatePageForStaticVersion();
            } else {
                scriptSrc = 'js/main.js';
            }
            
            console.log('[è„šæœ¬åŠ è½½] åŠ è½½è„šæœ¬:', scriptSrc);
            
            const script = document.createElement('script');
            script.src = scriptSrc;
            script.onload = function() {
                console.log('[è„šæœ¬åŠ è½½] è„šæœ¬åŠ è½½æˆåŠŸ:', scriptSrc);
            };
            script.onerror = function() {
                console.error('[è„šæœ¬åŠ è½½] è„šæœ¬åŠ è½½å¤±è´¥:', scriptSrc);
                // å¦‚æœæœåŠ¡å™¨ç‰ˆæœ¬åŠ è½½å¤±è´¥ï¼Œå°è¯•é™æ€ç‰ˆæœ¬
                if (scriptSrc === 'js/main.js') {
                    console.log('[è„šæœ¬åŠ è½½] å›é€€åˆ°é™æ€ç‰ˆæœ¬');
                    loadStaticVersion();
                }
            };
            
            document.head.appendChild(script);
        }
        
        // åŠ è½½é™æ€ç‰ˆæœ¬
        function loadStaticVersion() {
            const script = document.createElement('script');
            script.src = 'js/main-static.js';
            document.head.appendChild(script);
            updatePageForStaticVersion();
        }
        
        // ä¸ºé™æ€ç‰ˆæœ¬æ›´æ–°é¡µé¢å†…å®¹
        function updatePageForStaticVersion() {
            // æ·»åŠ é™æ€ç‰ˆæœ¬æç¤º
            const header = document.querySelector('.header');
            if (header && !header.querySelector('.static-notice')) {
                const notice = document.createElement('div');
                notice.className = 'static-notice';
                notice.innerHTML = 'ğŸ“Œ GitHub Pagesé™æ€ç‰ˆæœ¬ - æ•°æ®ä¿å­˜åœ¨æµè§ˆå™¨æœ¬åœ°å­˜å‚¨ä¸­';
                notice.style.cssText = `
                    background: #e3f2fd;
                    border: 1px solid #2196f3;
                    border-radius: 8px;
                    padding: 12px;
                    margin: 10px 0;
                    color: #1565c0;
                    font-size: 14px;
                    text-align: center;
                `;
                header.appendChild(notice);
            }
            
            // æ›´æ–°ç‰ˆæœ¬ä¿¡æ¯
            const versionInfo = document.querySelector('.version-info span');
            if (versionInfo) {
                versionInfo.textContent = 'v4.4.2 - GitHub Pagesé™æ€ç‰ˆæœ¬';
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œç¯å¢ƒæ£€æµ‹
        document.addEventListener('DOMContentLoaded', function() {
            console.log('[App] é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹ç¯å¢ƒæ£€æµ‹...');
            loadAppropriateScript();
        });
    </script>
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="å„¿ç«¥å‹å¥½çš„æ¯æ—¥ä»»åŠ¡ç®¡ç†å·¥å…·ï¼Œå¸®åŠ©åŸ¹å…»è‰¯å¥½ä¹ æƒ¯å’Œä¸“æ³¨åŠ›">
    <meta name="keywords" content="ä»»åŠ¡ç®¡ç†,å„¿ç«¥æ•™è‚²,ä¹ æƒ¯å…»æˆ,ä¸“æ³¨åŠ›è®­ç»ƒ">
    <meta name="author" content="CodeBuddy">
    <title>å°ä¹…çš„ä»»åŠ¡å¡ç‰‡ - å„¿ç«¥ä»»åŠ¡ç®¡ç†å·¥å…·</title>
    
    <!-- PWAæ”¯æŒ -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ä»»åŠ¡å¡ç‰‡">
    
    <!-- å›¾æ ‡ -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="icon-192.svg">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/cards.css">
    <link rel="stylesheet" href="css/animations.css">
</head>
<body>
    <div class="container">
        <!-- é¡¶éƒ¨ä¿¡æ¯åŒºåŸŸ -->
        <header class="header">
            <div class="date-info">
                <h1 id="current-date"></h1>
                <div class="weather-icon">â˜€ï¸</div>
            </div>
            <div class="user-greeting">
                <h2>ä½ å¥½ï¼Œ<span id="username">å°ä¹…</span>ï¼</h2>
                <p id="progress-message" class="progress-message">ä»Šå¤©ä½ è¿˜æ²¡å¼€å§‹ä»»åŠ¡ï¼Œè¯¥åŠ æ²¹å–½ï¼</p>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
                <span class="progress-text" id="progress-text">0/8</span>
            </div>
            
            <!-- å¾½ç« æ˜¾ç¤ºåŒºåŸŸ -->
            <div class="badges-section" id="badges-section" style="display: none;">
                <div class="badges-title">ğŸ‰ è·å¾—å¾½ç« </div>
                <div class="badges-container" id="badges-container">
                    <!-- å¾½ç« å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </header>

        <!-- ä»»åŠ¡å¡ç‰‡åŒºåŸŸ -->
        <main class="tasks-container">
            <div class="tasks-grid" id="tasks-grid">
                <!-- ä»»åŠ¡å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </main>

        <!-- åº•éƒ¨å¯¼èˆª -->
        <footer class="footer">
            <button class="nav-btn" onclick="openFocusChallenge()">
                <span class="icon">â°</span>
                <span class="text">ä¸“æ³¨åŠ›å¤§æŒ‘æˆ˜</span>
            </button>
            <button class="nav-btn" onclick="openEditTasks()">
                <span class="icon">âœï¸</span>
                <span class="text">ä»»åŠ¡ç¼–è¾‘</span>
            </button>
            <button class="nav-btn" onclick="openTodayTasksManager()">
                <span class="icon">ğŸ“‹</span>
                <span class="text">ä»Šæ—¥ä»»åŠ¡ç®¡ç†</span>
            </button>
            <button class="nav-btn" onclick="openStatistics()">
                <span class="icon">ğŸ“Š</span>
                <span class="text">æŸ¥çœ‹ç»Ÿè®¡</span>
            </button>
            <button class="nav-btn" onclick="resetTasks()">
                <span class="icon">ğŸ”„</span>
                <span class="text">é‡ç½®ä»Šæ—¥</span>
            </button>
        </footer>
        
        <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
        <div class="version-info">
            <span>v4.4.2 - æœåŠ¡å™¨ä¸²è¡Œæ›´æ–°æœºåˆ¶</span>
        </div>
    </div>

    <!-- åº†ç¥åŠ¨ç”» -->
    <div class="celebration" id="celebration">
        <div class="celebration-text">å¤ªæ£’äº†ï¼ğŸ‰</div>
        <div class="confetti"></div>
    </div>

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="å„¿ç«¥å‹å¥½çš„æ¯æ—¥ä»»åŠ¡ç®¡ç†å·¥å…·ï¼Œå¸®åŠ©åŸ¹å…»è‰¯å¥½ä¹ æƒ¯å’Œä¸“æ³¨åŠ›">
    <meta name="keywords" content="ä»»åŠ¡ç®¡ç†,å„¿ç«¥æ•™è‚²,ä¹ æƒ¯å…»æˆ,ä¸“æ³¨åŠ›è®­ç»ƒ">
    <meta name="author" content="CodeBuddy">
    <title>å°ä¹…çš„ä»»åŠ¡å¡ç‰‡ - å„¿ç«¥ä»»åŠ¡ç®¡ç†å·¥å…·</title>
    
    <!-- PWAæ”¯æŒ -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ä»»åŠ¡å¡ç‰‡">
    
    <!-- å›¾æ ‡ -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="icon-192.svg">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/cards.css">
    <link rel="stylesheet" href="css/animations.css">
</head>
<body>
    <div class="container">
        <!-- é¡¶éƒ¨ä¿¡æ¯åŒºåŸŸ -->
        <header class="header">
            <div class="date-info">
                <h1 id="current-date"></h1>
                <div class="weather-icon">â˜€ï¸</div>
            </div>
            <div class="user-greeting">
                <h2>ä½ å¥½ï¼Œ<span id="username">å°ä¹…</span>ï¼</h2>
                <p id="progress-message" class="progress-message">ä»Šå¤©ä½ è¿˜æ²¡å¼€å§‹ä»»åŠ¡ï¼Œè¯¥åŠ æ²¹å–½ï¼</p>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
                <span class="progress-text" id="progress-text">0/8</span>
            </div>
            
            <!-- å¾½ç« æ˜¾ç¤ºåŒºåŸŸ -->
            <div class="badges-section" id="badges-section" style="display: none;">
                <div class="badges-title">ğŸ‰ è·å¾—å¾½ç« </div>
                <div class="badges-container" id="badges-container">
                    <!-- å¾½ç« å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </header>

        <!-- ä»»åŠ¡å¡ç‰‡åŒºåŸŸ -->
        <main class="tasks-container">
            <div class="tasks-grid" id="tasks-grid">
                <!-- ä»»åŠ¡å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </main>

        <!-- åº•éƒ¨å¯¼èˆª -->
        <footer class="footer">
            <button class="nav-btn" onclick="openFocusChallenge()">
                <span class="icon">â°</span>
                <span class="text">ä¸“æ³¨åŠ›å¤§æŒ‘æˆ˜</span>
            </button>
            <button class="nav-btn" onclick="openEditTasks()">
                <span class="icon">âœï¸</span>
                <span class="text">ä»»åŠ¡ç¼–è¾‘</span>
            </button>
            <button class="nav-btn" onclick="openTodayTasksManager()">
                <span class="icon">ğŸ“‹</span>
                <span class="text">ä»Šæ—¥ä»»åŠ¡ç®¡ç†</span>
            </button>
            <button class="nav-btn" onclick="openStatistics()">
                <span class="icon">ğŸ“Š</span>
                <span class="text">æŸ¥çœ‹ç»Ÿè®¡</span>
            </button>
            <button class="nav-btn" onclick="resetTasks()">
                <span class="icon">ğŸ”„</span>
                <span class="text">é‡ç½®ä»Šæ—¥</span>
            </button>
        </footer>
        
        <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
        <div class="version-info">
            <span>v4.4.2 - æœåŠ¡å™¨ä¸²è¡Œæ›´æ–°æœºåˆ¶</span>
        </div>
    </div>

    <!-- åº†ç¥åŠ¨ç”» -->
    <div class="celebration" id="celebration">
        <div class="celebration-text">å¤ªæ£’äº†ï¼ğŸ‰</div>
        <div class="confetti"></div>
    </div>

    <!-- æ ¸å¿ƒé€»è¾‘ (v4.3.6.1) - ç‹¬ç«‹ç‰ˆæœ¬ -->
    <script src="js/main.js"></script>
    
    <style>
        .version-info {
            text-align: center;
            font-size: 12px;
            color: #888;
            margin-top: 10px;
            padding-bottom: 5px;
        }
    </style>
</body>
</html>