# å°ä¹…ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ v4.2.1 éƒ¨ç½²æ£€æŸ¥æ¸…å•

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. å¤‡ä»½ç°æœ‰æ•°æ®
- [ ] å¯¼å‡ºå½“å‰ç³»ç»Ÿæ•°æ®ï¼ˆä½¿ç”¨åº”ç”¨å†…çš„å¯¼å‡ºåŠŸèƒ½ï¼‰
- [ ] å¤‡ä»½æœåŠ¡å™¨ä¸Šçš„`data`ç›®å½•
- [ ] å¤‡ä»½æœåŠ¡å™¨ä¸Šçš„é…ç½®æ–‡ä»¶

### 2. å‡†å¤‡éƒ¨ç½²åŒ…
```bash
# Windows PowerShell (æ–¹æ³•1 - æ¨è)
Compress-Archive -Path * -DestinationPath task-manager-v4.2.1.zip -Exclude .git,node_modules,.codebuddy,task-manager-v4.2.1.zip

# Windows PowerShell (æ–¹æ³•2)
tar -czf C:\temp\task-manager-v4.2.1.tar.gz --exclude='.git' --exclude='node_modules' --exclude='.codebuddy' .

# Windows PowerShell (æ–¹æ³•3)
tar -czf task-manager-v4.2.1.tar.gz --exclude='.git' --exclude='node_modules' --exclude='.codebuddy' --exclude='task-manager-v4.2.1.tar.gz' .
```

### 3. ä¸Šä¼ éƒ¨ç½²è„šæœ¬
```bash
# ä¸Šä¼ é¡¹ç›®æ–‡ä»¶
scp task-manager-v4.2.1.zip root@115.159.5.111:/tmp/

# ä¸Šä¼ ä¿®å¤åçš„éƒ¨ç½²è„šæœ¬
scp deploy/one-click-deploy.sh root@115.159.5.111:/tmp/

# ä¸Šä¼ æƒé™ä¿®å¤å·¥å…·
scp deploy/fix-baota-permissions.sh root@115.159.5.111:/tmp/

# ä¸Šä¼ éªŒè¯è„šæœ¬
scp deploy/verify-deployment.sh root@115.159.5.111:/tmp/
```

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### 1. è¿æ¥æœåŠ¡å™¨
```bash
ssh root@115.159.5.111
```

### 2. è®¾ç½®æ‰§è¡Œæƒé™
```bash
chmod +x /tmp/one-click-deploy.sh
chmod +x /tmp/fix-baota-permissions.sh
chmod +x /tmp/verify-deployment.sh
```

### 3. æ‰§è¡Œéƒ¨ç½²
```bash
/tmp/one-click-deploy.sh
```

### 4. éªŒè¯éƒ¨ç½²
```bash
/tmp/verify-deployment.sh
```

### 5. å¦‚é‡æƒé™é—®é¢˜
```bash
/tmp/fix-baota-permissions.sh
```

## âœ… éƒ¨ç½²åéªŒè¯

### 1. æ–‡ä»¶ç»“æ„æ£€æŸ¥
- [ ] ç¡®è®¤`data`ç›®å½•å­˜åœ¨ä¸”æƒé™æ­£ç¡®
- [ ] ç¡®è®¤`data/shared-tasks.json`æ–‡ä»¶å­˜åœ¨ä¸”æƒé™æ­£ç¡®
- [ ] ç¡®è®¤`api/data-sync.php`æ–‡ä»¶å­˜åœ¨ä¸”æƒé™æ­£ç¡®

### 2. APIåŠŸèƒ½æ£€æŸ¥
```bash
# æµ‹è¯•æ•°æ®åŒæ­¥API
curl -s http://115.159.5.111/api/data-sync.php | json_pp
```
- [ ] APIè¿”å›æ­£ç¡®çš„JSONå“åº”
- [ ] å“åº”ä¸­åŒ…å«`success`å­—æ®µä¸”å€¼ä¸º`true`

### 3. æµè§ˆå™¨è®¿é—®æ£€æŸ¥
- [ ] è®¿é—®`http://115.159.5.111`ç¡®è®¤ç½‘ç«™æ­£å¸¸åŠ è½½
- [ ] æ£€æŸ¥é¡µé¢åº•éƒ¨æ˜¯å¦æ˜¾ç¤º`v4.2.1 - æ•°æ®ä¸€è‡´æ€§å¢å¼ºç‰ˆ`
- [ ] è®¿é—®`http://115.159.5.111/sync-test.html`æµ‹è¯•åŒæ­¥åŠŸèƒ½

### 4. è·¨æµè§ˆå™¨æµ‹è¯•
- [ ] åœ¨Chromeæµè§ˆå™¨ä¸­æ·»åŠ ä»»åŠ¡å¹¶å®Œæˆ
- [ ] åœ¨Firefoxæˆ–å…¶ä»–æµè§ˆå™¨ä¸­éªŒè¯æ•°æ®æ˜¯å¦åŒæ­¥
- [ ] åœ¨ç§»åŠ¨è®¾å¤‡æµè§ˆå™¨ä¸­éªŒè¯æ•°æ®æ˜¯å¦åŒæ­¥

### 5. æ—¥å¿—æ£€æŸ¥
```bash
# æ£€æŸ¥åŒæ­¥æ—¥å¿—
cat /www/wwwroot/task-manager/data/sync.log

# æ£€æŸ¥é”™è¯¯æ—¥å¿—
cat /www/wwwroot/task-manager/data/error.log

# æ£€æŸ¥PHPé”™è¯¯æ—¥å¿—
tail -f /www/wwwlogs/php-error.log
```
- [ ] æ—¥å¿—ä¸­æ— ä¸¥é‡é”™è¯¯
- [ ] åŒæ­¥æ—¥å¿—æ˜¾ç¤ºæˆåŠŸè®°å½•

## ğŸ” å¸¸è§é—®é¢˜æ’æŸ¥

### 1. æ•°æ®åŒæ­¥å¤±è´¥
- [ ] æ£€æŸ¥`data`ç›®å½•æƒé™ï¼ˆåº”ä¸º755ï¼‰
- [ ] æ£€æŸ¥`shared-tasks.json`æ–‡ä»¶æƒé™ï¼ˆåº”ä¸º644ï¼‰
- [ ] ç¡®è®¤PHPç‰ˆæœ¬å…¼å®¹ï¼ˆæ¨èPHP 7.2+ï¼‰
- [ ] æ£€æŸ¥ç½‘ç«™é…ç½®ä¸­çš„PHPè®¾ç½®

### 2. å®å¡”é¢æ¿é—®é¢˜
- [ ] æ£€æŸ¥`.user.ini`æ–‡ä»¶æƒé™
- [ ] æ‰§è¡Œæƒé™ä¿®å¤è„šæœ¬
```bash
/tmp/fix-baota-permissions.sh
```

### 3. ç½‘ç«™æ— æ³•è®¿é—®
- [ ] æ£€æŸ¥Nginx/Apacheé…ç½®
- [ ] ç¡®è®¤ç½‘ç«™æ ¹ç›®å½•è®¾ç½®æ­£ç¡®
- [ ] é‡å¯WebæœåŠ¡
```bash
systemctl restart nginx
systemctl restart php-fpm
```

## ğŸ“Š éƒ¨ç½²æˆåŠŸæ ‡å¿—

### æŠ€æœ¯æŒ‡æ ‡
- [ ] HTTP 200 å“åº”
- [ ] æ‰€æœ‰é™æ€èµ„æºåŠ è½½æˆåŠŸ
- [ ] JavaScriptæ— é”™è¯¯
- [ ] æ•°æ®åŒæ­¥APIæ­£å¸¸å·¥ä½œ

### åŠŸèƒ½æŒ‡æ ‡
- [ ] ä»»åŠ¡å¡ç‰‡æ­£å¸¸æ˜¾ç¤º
- [ ] ä»»åŠ¡å®ŒæˆåŠŸèƒ½æ­£å¸¸
- [ ] è·¨æµè§ˆå™¨æ•°æ®åŒæ­¥æ­£å¸¸
- [ ] æ•°æ®ä¸€è‡´æ€§è‡ªåŠ¨ä¿®å¤æ­£å¸¸

## ğŸ”„ å›æ»šè®¡åˆ’

å¦‚æœéƒ¨ç½²å¤±è´¥éœ€è¦å›æ»šï¼š

1. åœæ­¢WebæœåŠ¡
```bash
systemctl stop nginx
```

2. æ¢å¤å¤‡ä»½
```bash
rm -rf /www/wwwroot/task-manager/*
tar -xzf /tmp/task-manager-backup.tar.gz -C /www/wwwroot/task-manager/
```

3. ä¿®å¤æƒé™
```bash
chown -R www:www /www/wwwroot/task-manager
find /www/wwwroot/task-manager -type d -exec chmod 755 {} \;
find /www/wwwroot/task-manager -type f -exec chmod 644 {} \;
```

4. é‡å¯WebæœåŠ¡
```bash
systemctl start nginx
```

## ğŸ“ éƒ¨ç½²æŠ¥å‘Š

å®Œæˆéƒ¨ç½²åï¼Œè¯·å¡«å†™ä»¥ä¸‹æŠ¥å‘Šï¼š

- éƒ¨ç½²æ—¥æœŸï¼š________________
- éƒ¨ç½²äººå‘˜ï¼š________________
- éƒ¨ç½²ç‰ˆæœ¬ï¼šv4.2.1
- éƒ¨ç½²ç»“æœï¼šâ–¡ æˆåŠŸ â–¡ éƒ¨åˆ†æˆåŠŸ â–¡ å¤±è´¥
- é‡åˆ°çš„é—®é¢˜ï¼š________________
- è§£å†³æ–¹æ¡ˆï¼š________________
- éªŒè¯ç»“æœï¼š________________

---

éƒ¨ç½²å®Œæˆåï¼Œè¯·å°†æ­¤æ£€æŸ¥æ¸…å•ä¸å¡«å†™å¥½çš„éƒ¨ç½²æŠ¥å‘Šä¸€èµ·å­˜æ¡£ã€‚